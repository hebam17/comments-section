{"ast":null,"code":"import _slicedToArray from\"E:/courses/my_personal_file/challenges/comments-section/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useRef}from\"react\";import Scores from\"./Scores\";import Info from\"./Info\";import Reply from\"./Reply\";import Delete from\"./Delete\";import Update from\"./Update\";import Edit from\"./Edit\";import NewComment from\"./NewComment\";import{handleReply as _handleReply,handleReplyActive as _handleReplyActive,handleEditComment as _handleEditComment,handleUpdateReply as _handleUpdateReply,handleCancelDelete as _handleCancelDelete,handleConfirmDeleteReply as _handleConfirmDeleteReply}from\"../utils\";import{DeleteModal}from\"./DeleteModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Replies(_ref){var reply=_ref.reply,currentUser=_ref.currentUser,commentUser=_ref.commentUser,comment=_ref.comment;var _useState=useState(reply.content),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),replyComment=_useState4[0],setReplyComment=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),update=_useState6[0],setUpdate=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),displayModal=_useState8[0],setDisplayModal=_useState8[1];var textRef=useRef();var deleteRef=useRef();useEffect(function(){if(deleteRef){try{window.onclick=function(e){if(e.target.isEqualNode(deleteRef.current.firstElementChild)){setDisplayModal(\"none\");deleteRef.current.style.display=\"none\";}};}catch(err){console.log(err.message);}}},[deleteRef,displayModal]);var setTextFinal=function setTextFinal(text){var arr=text.split(\"@\".concat(commentUser,\" \"));setText(arr[1]);};var handleText=function handleText(e){setTextFinal(e.target.value);};var handleDeleteModal=function handleDeleteModal(){console.log(\"deleteRef:\",deleteRef);setDisplayModal(\"block\");deleteRef.current.style.display=\"block\";};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DeleteModal,{ref:deleteRef,handleCancelDelete:function handleCancelDelete(){return _handleCancelDelete(setDisplayModal,deleteRef);},handleConfirmDeleteReply:function handleConfirmDeleteReply(){return _handleConfirmDeleteReply(currentUser,comment,reply,setDisplayModal,deleteRef);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-scores\",children:/*#__PURE__*/_jsx(Scores,{score:reply.score,currentUser:currentUser,commentId:reply._id})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-controllers\",children:[currentUser.username===reply.user.username?/*#__PURE__*/_jsx(\"div\",{className:\"info-co\",children:/*#__PURE__*/_jsx(Info,{profileUser:\"you\",user:reply.user,createdAt:reply.createdAt})}):/*#__PURE__*/_jsx(\"div\",{className:\"info-co\",children:/*#__PURE__*/_jsx(Info,{profileUser:\"user\",user:reply.user,createdAt:reply.createdAt})}),/*#__PURE__*/_jsx(\"div\",{className:\"tools\",children:currentUser.username===reply.user.username?/*#__PURE__*/_jsxs(\"div\",{className:\"comment-delete\",children:[/*#__PURE__*/_jsx(Delete,{handleDeleteModal:handleDeleteModal}),/*#__PURE__*/_jsx(Edit,{handleEditComment:function handleEditComment(){_handleEditComment(textRef,setUpdate);}})]}):/*#__PURE__*/_jsx(\"div\",{className:\"comment-reply\",children:/*#__PURE__*/_jsx(Reply,{handleReply:function handleReply(){return _handleReply(setReplyComment);}})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text text-reply\",children:[/*#__PURE__*/_jsx(\"textarea\",{name:\"comment\",value:\"@\".concat(commentUser,\" \").concat(text),readOnly:true,onChange:handleText,ref:textRef}),/*#__PURE__*/_jsx(\"div\",{className:\"invisible\",children:\"@\".concat(commentUser,\" \").concat(text)})]}),update&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-update\",children:/*#__PURE__*/_jsx(Update,{handleUpdateReply:function handleUpdateReply(){return _handleUpdateReply(reply,comment,currentUser,text);}})})]})]}),replyComment&&/*#__PURE__*/_jsx(NewComment,{currentUser:currentUser,reply:true,handleReplyActive:function handleReplyActive(txt){return _handleReplyActive(setReplyComment,txt,reply,currentUser);}})]})]});}","map":{"version":3,"sources":["E:/courses/my_personal_file/challenges/comments-section/client/src/components/Replies.js"],"names":["useState","useEffect","useRef","Scores","Info","Reply","Delete","Update","Edit","NewComment","handleReply","handleReplyActive","handleEditComment","handleUpdateReply","handleCancelDelete","handleConfirmDeleteReply","DeleteModal","Replies","reply","currentUser","commentUser","comment","content","text","setText","replyComment","setReplyComment","update","setUpdate","displayModal","setDisplayModal","textRef","deleteRef","window","onclick","e","target","isEqualNode","current","firstElementChild","style","display","err","console","log","message","setTextFinal","arr","split","handleText","value","handleDeleteModal","score","_id","username","user","createdAt","txt"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport Scores from \"./Scores\";\r\nimport Info from \"./Info\";\r\nimport Reply from \"./Reply\";\r\nimport Delete from \"./Delete\";\r\nimport Update from \"./Update\";\r\nimport Edit from \"./Edit\";\r\nimport NewComment from \"./NewComment\";\r\nimport {\r\n  handleReply,\r\n  handleReplyActive,\r\n  handleEditComment,\r\n  handleUpdateReply,\r\n  handleCancelDelete,\r\n  handleConfirmDeleteReply,\r\n} from \"../utils\";\r\n\r\nimport { DeleteModal } from \"./DeleteModal\";\r\n\r\nexport default function Replies({ reply, currentUser, commentUser, comment }) {\r\n  const [text, setText] = useState(reply.content);\r\n  const [replyComment, setReplyComment] = useState(false);\r\n  const [update, setUpdate] = useState(false);\r\n  const [displayModal, setDisplayModal] = useState(\"\");\r\n  const textRef = useRef();\r\n  const deleteRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (deleteRef) {\r\n      try {\r\n        window.onclick = (e) => {\r\n          if (e.target.isEqualNode(deleteRef.current.firstElementChild)) {\r\n            setDisplayModal(\"none\");\r\n            deleteRef.current.style.display = \"none\";\r\n          }\r\n        };\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n  }, [deleteRef, displayModal]);\r\n\r\n  const setTextFinal = (text) => {\r\n    let arr = text.split(`@${commentUser} `);\r\n    setText(arr[1]);\r\n  };\r\n\r\n  const handleText = (e) => {\r\n    setTextFinal(e.target.value);\r\n  };\r\n\r\n  const handleDeleteModal = () => {\r\n    console.log(\"deleteRef:\", deleteRef);\r\n    setDisplayModal(\"block\");\r\n    deleteRef.current.style.display = \"block\";\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <DeleteModal\r\n        ref={deleteRef}\r\n        handleCancelDelete={() =>\r\n          handleCancelDelete(setDisplayModal, deleteRef)\r\n        }\r\n        handleConfirmDeleteReply={() =>\r\n          handleConfirmDeleteReply(\r\n            currentUser,\r\n            comment,\r\n            reply,\r\n            setDisplayModal,\r\n            deleteRef\r\n          )\r\n        }\r\n      />\r\n\r\n      <div>\r\n        <div className=\"comment \">\r\n          <div className=\"comment-scores\">\r\n            <Scores\r\n              score={reply.score}\r\n              currentUser={currentUser}\r\n              commentId={reply._id}\r\n            />\r\n          </div>\r\n          <div className=\"comment-info\">\r\n            <div className=\"comment-controllers\">\r\n              {currentUser.username === reply.user.username ? (\r\n                <div className=\"info-co\">\r\n                  <Info\r\n                    profileUser=\"you\"\r\n                    user={reply.user}\r\n                    createdAt={reply.createdAt}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"info-co\">\r\n                  <Info\r\n                    profileUser=\"user\"\r\n                    user={reply.user}\r\n                    createdAt={reply.createdAt}\r\n                  />\r\n                </div>\r\n              )}\r\n              <div className=\"tools\">\r\n                {currentUser.username === reply.user.username ? (\r\n                  <div className=\"comment-delete\">\r\n                    <Delete handleDeleteModal={handleDeleteModal} />\r\n                    <Edit\r\n                      handleEditComment={() => {\r\n                        handleEditComment(textRef, setUpdate);\r\n                      }}\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"comment-reply\">\r\n                    <Reply handleReply={() => handleReply(setReplyComment)} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"text text-reply\">\r\n              <textarea\r\n                name=\"comment\"\r\n                value={`@${commentUser} ${text}`}\r\n                readOnly={true}\r\n                onChange={handleText}\r\n                ref={textRef}\r\n              />\r\n              <div className=\"invisible\">{`@${commentUser} ${text}`}</div>\r\n            </div>\r\n            {update && (\r\n              <div className=\"comment-update\">\r\n                <Update\r\n                  handleUpdateReply={() =>\r\n                    handleUpdateReply(reply, comment, currentUser, text)\r\n                  }\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {replyComment && (\r\n          <NewComment\r\n            currentUser={currentUser}\r\n            reply={true}\r\n            handleReplyActive={(txt) =>\r\n              handleReplyActive(setReplyComment, txt, reply, currentUser)\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}